{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/lib/api/video-api.ts"],"sourcesContent":["import { VideoSource } from './types';\n\n// Multiple video embed APIs configuration - scalable to many providers\nconst VIDEO_APIS = [\n  {\n    name: 'VidSrc',\n    baseUrl: process.env.NEXT_PUBLIC_VIDEO_EMBED_1 || 'https://vidsrc.icu/embed',\n    priority: 1,\n    supportsTv: true,\n    supportsMovies: true\n  },\n  {\n    name: 'VidSrc Pro',\n    baseUrl: process.env.NEXT_PUBLIC_VIDEO_EMBED_2 || 'https://vidsrc.pro/embed',\n    priority: 2,\n    supportsTv: true,\n    supportsMovies: true\n  },\n  {\n    name: 'Embed Movies',\n    baseUrl: process.env.NEXT_PUBLIC_VIDEO_EMBED_3 || 'https://embedmovies.net',\n    priority: 3,\n    supportsTv: true,\n    supportsMovies: true\n  },\n  {\n    name: 'SuperEmbed',\n    baseUrl: process.env.NEXT_PUBLIC_VIDEO_EMBED_4 || 'https://multiembed.mov',\n    priority: 4,\n    supportsTv: true,\n    supportsMovies: true\n  }\n];\n\n// Filter and sort APIs by priority\nconst getConfiguredApis = (mediaType?: 'movie' | 'tv') => {\n  return VIDEO_APIS\n    .filter(api => {\n      if (!api.baseUrl) return false;\n      if (mediaType === 'movie') return api.supportsMovies;\n      if (mediaType === 'tv') return api.supportsTv;\n      return true;\n    })\n    .sort((a, b) => a.priority - b.priority);\n};\n\n// Create video source with enhanced metadata\nfunction createVideoSource(url: string, api: typeof VIDEO_APIS[0], mediaType: 'movie' | 'tv', tmdbId: number): VideoSource {\n  return {\n    url: url,\n    quality: 'HD',\n    type: 'iframe',\n    servers: api.name,\n    apiIndex: VIDEO_APIS.indexOf(api),\n    mediaType,\n    tmdbId,\n    isWorking: null // Will be updated after testing\n  };\n}\n\n// URL processing function - handles dynamic URL construction\nfunction processVideoUrl(api: typeof VIDEO_APIS[0], mediaType: 'movie' | 'tv', tmdbId: number, season?: number, episode?: number): string {\n  const baseUrl = api.baseUrl.replace(/\\/+$/, ''); // Remove trailing slashes\n  \n  switch (mediaType) {\n    case 'movie':\n      // Multiple URL patterns supported\n      if (api.name === 'VidSrc') {\n        return `${baseUrl}/movie/${tmdbId}`;\n      } else if (api.name === 'VidSrc Pro') {\n        return `${baseUrl}/movie?tmdb=${tmdbId}`;\n      } else if (api.name === 'Embed Movies') {\n        return `${baseUrl}/embed/movie/${tmdbId}`;\n      } else {\n        return `${baseUrl}/movie/${tmdbId}`;\n      }\n      \n    case 'tv':\n      if (!season || !episode) return '';\n      \n      if (api.name === 'VidSrc') {\n        return `${baseUrl}/tv/${tmdbId}/${season}/${episode}`;\n      } else if (api.name === 'VidSrc Pro') {\n        return `${baseUrl}/tv?tmdb=${tmdbId}&season=${season}&episode=${episode}`;\n      } else if (api.name === 'Embed Movies') {\n        return `${baseUrl}/embed/tv/${tmdbId}/${season}/${episode}`;\n      } else {\n        return `${baseUrl}/tv/${tmdbId}/${season}/${episode}`;\n      }\n      \n    default:\n      return '';\n  }\n}\n\n// Enhanced API testing function\nasync function testVideoSource(source: VideoSource): Promise<boolean> {\n  try {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 5000);\n    \n    const response = await fetch(source.url, {\n      method: 'HEAD',\n      mode: 'no-cors',\n      signal: controller.signal\n    });\n    \n    clearTimeout(timeoutId);\n    return true;\n  } catch (error) {\n    console.warn(`Source ${source.servers} failed test:`, error);\n    return false;\n  }\n}\n\n// Main video API service\nexport const videoApi = {\n  // Get movie sources with fallback priority\n  async getMovieSources(tmdbId: number): Promise<VideoSource[]> {\n    const configuredApis = getConfiguredApis('movie');\n    \n    if (configuredApis.length === 0) {\n      console.warn('No movie APIs configured');\n      return [];\n    }\n\n    // Create all possible sources\n    const sources = configuredApis.map(api => \n      createVideoSource(processVideoUrl(api, 'movie', tmdbId), api, 'movie', tmdbId)\n    );\n\n    // Test first source and return if working\n    for (const source of sources) {\n      const isWorking = await testVideoSource(source);\n      if (isWorking) {\n        source.isWorking = true;\n        return [source];\n      }\n      source.isWorking = false;\n    }\n\n    return sources; // Return all sources even if none tested working\n  },\n\n  // Get TV show sources with fallback priority\n  async getTVSources(tmdbId: number, season: number, episode: number): Promise<VideoSource[]> {\n    const configuredApis = getConfiguredApis('tv');\n    \n    if (configuredApis.length === 0) {\n      console.warn('No TV APIs configured');\n      return [];\n    }\n\n    const sources = configuredApis.map(api => \n      createVideoSource(processVideoUrl(api, 'tv', tmdbId, season, episode), api, 'tv', tmdbId)\n    );\n\n    // Test first source and return if working\n    for (const source of sources) {\n      const isWorking = await testVideoSource(source);\n      if (isWorking) {\n        source.isWorking = true;\n        return [source];\n      }\n      source.isWorking = false;\n    }\n\n    return sources;\n  },\n\n  // Get ALL sources for manual switching\n  async getAllMovieSources(tmdbId: number): Promise<VideoSource[]> {\n    const configuredApis = getConfiguredApis('movie');\n    \n    return configuredApis.map(api => \n      createVideoSource(processVideoUrl(api, 'movie', tmdbId), api, 'movie', tmdbId)\n    );\n  },\n\n  async getAllTVSources(tmdbId: number, season: number, episode: number): Promise<VideoSource[]> {\n    const configuredApis = getConfiguredApis('tv');\n    \n    return configuredApis.map(api => \n      createVideoSource(processVideoUrl(api, 'tv', tmdbId, season, episode), api, 'tv', tmdbId)\n    );\n  },\n\n  // Batch test all sources\n  async testAllSources(sources: VideoSource[]): Promise<VideoSource[]> {\n    const testPromises = sources.map(async (source) => {\n      const isWorking = await testVideoSource(source);\n      return { ...source, isWorking };\n    });\n    \n    return Promise.all(testPromises);\n  },\n\n  // Get working sources only\n  async getWorkingSources(mediaType: 'movie' | 'tv', tmdbId: number, season?: number, episode?: number): Promise<VideoSource[]> {\n    const allSources = mediaType === 'movie' \n      ? await this.getAllMovieSources(tmdbId)\n      : await this.getAllTVSources(tmdbId, season!, episode!);\n    \n    const testedSources = await this.testAllSources(allSources);\n    return testedSources.filter(source => source.isWorking);\n  },\n\n  // Configuration and status methods\n  getConfigStatus() {\n    return {\n      configured: getConfiguredApis().length,\n      total: VIDEO_APIS.length,\n      apis: VIDEO_APIS.map(api => ({\n        name: api.name,\n        configured: !!api.baseUrl,\n        priority: api.priority,\n        supportsTv: api.supportsTv,\n        supportsMovies: api.supportsMovies\n      }))\n    };\n  },\n\n  hasConfiguredApis(): boolean {\n    return getConfiguredApis().length > 0;\n  },\n\n  // Direct URL building for backward compatibility\n  buildUrl(apiIndex: number, mediaType: 'movie' | 'tv', tmdbId: number, season?: number, episode?: number): string {\n    const api = VIDEO_APIS[apiIndex];\n    if (!api || !api.baseUrl) return '';\n    \n    return processVideoUrl(api, mediaType, tmdbId, season, episode);\n  }\n};\n\n// Export utilities\nexport { getConfiguredApis, createVideoSource, processVideoUrl };\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/components/player/VideoPlayer.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { X, RotateCcw } from 'lucide-react';\nimport { videoApi } from '@/lib/api/video-api';\nimport { VideoSource } from '@/lib/api/types';\n\ninterface VideoPlayerProps {\n  mediaId: number;\n  mediaType: 'movie' | 'tv';\n  title: string;\n  season?: number;\n  episode?: number;\n  onClose: () => void;\n}\n\nexport default function VideoPlayer({\n  mediaId, mediaType, title, season, episode, onClose\n}: VideoPlayerProps) {\n  const [videoSources, setVideoSources] = useState<VideoSource[]>([]);\n  const [currentSourceIndex, setCurrentSourceIndex] = useState(0);\n  const [videoUrl, setVideoUrl] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n\n  // Load video sources from API on component mount\n  useEffect(() => {\n    loadVideoSources();\n  }, [mediaId, mediaType, season, episode]);\n\n  // Update video URL when sources or index changes\n  useEffect(() => {\n    if (videoSources.length > 0 && currentSourceIndex < videoSources.length) {\n      const currentSource = videoSources[currentSourceIndex];\n      setVideoUrl(currentSource.url);\n      setError(null);\n      setLoading(false);\n    } else if (videoSources.length === 0 && !loading) {\n      setError('No video sources available.');\n    }\n  }, [videoSources, currentSourceIndex, loading]);\n\n  const loadVideoSources = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      let sources: VideoSource[] = [];\n      \n      if (mediaType === 'movie') {\n        sources = await videoApi.getAllMovieSources(mediaId);\n      } else if (mediaType === 'tv' && season && episode) {\n        sources = await videoApi.getAllTVSources(mediaId, season, episode);\n      }\n\n      if (sources.length === 0) {\n        // Fallback: try to get at least one working source\n        if (mediaType === 'movie') {\n          const fallbackSources = await videoApi.getMovieSources(mediaId);\n          sources = fallbackSources;\n        } else if (mediaType === 'tv' && season && episode) {\n          const fallbackSources = await videoApi.getTVSources(mediaId, season, episode);\n          sources = fallbackSources;\n        }\n      }\n\n      setVideoSources(sources);\n      setCurrentSourceIndex(0);\n      \n      if (sources.length === 0) {\n        setError('No video sources available for this content.');\n        setLoading(false);\n      }\n    } catch (err) {\n      console.error('Failed to load video sources:', err);\n      setError('Failed to load video sources.');\n      setLoading(false);\n    }\n  };\n\n  // Handle iframe load error - try next source\n  const handleIframeError = () => {\n    console.error(`Video failed to load from source: ${videoSources[currentSourceIndex]?.servers}`);\n    if (currentSourceIndex < videoSources.length - 1) {\n      setCurrentSourceIndex(prev => prev + 1);\n    } else {\n      setError('All video sources failed to load.');\n    }\n  };\n\n  // Try next source manually\n  const tryNextSource = () => {\n    if (currentSourceIndex < videoSources.length - 1) {\n      setCurrentSourceIndex(prev => prev + 1);\n    }\n  };\n\n  // Get current source info\n  const getCurrentSource = () => {\n    if (videoSources.length > 0 && currentSourceIndex < videoSources.length) {\n      return videoSources[currentSourceIndex];\n    }\n    return null;\n  };\n\n  const currentSource = getCurrentSource();\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black flex items-center justify-center\">\n      {/* Close Button */}\n      <button\n        onClick={onClose}\n        className=\"absolute top-4 right-4 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors\"\n      >\n        <X className=\"w-6 h-6\" />\n      </button>\n\n      {/* Title and Source Info */}\n      <div className=\"absolute top-4 left-4 z-10\">\n        <h2 className=\"text-white text-xl font-bold\">{title}</h2>\n        {currentSource && (\n          <div className=\"text-gray-400 text-sm space-y-1\">\n            <p>Source: {currentSource.servers}</p>\n            <p>Quality: {currentSource.quality}</p>\n            {videoSources.length > 1 && (\n              <p>Source {currentSourceIndex + 1} of {videoSources.length}</p>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Loading State */}\n      {loading && (\n        <div className=\"flex flex-col items-center gap-4\">\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-white\"></div>\n          <p className=\"text-white\">Loading video sources...</p>\n        </div>\n      )}\n\n      {/* Error State */}\n      {error && (\n        <div className=\"flex flex-col items-center gap-4 text-center max-w-md\">\n          <div className=\"text-red-500 text-6xl mb-4\">⚠️</div>\n          <h3 className=\"text-white text-xl font-bold\">Video Unavailable</h3>\n          <p className=\"text-gray-400\">{error}</p>\n          {currentSourceIndex < videoSources.length - 1 && (\n            <button\n              onClick={tryNextSource}\n              className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full transition-colors\"\n            >\n              <RotateCcw className=\"w-4 h-4\" />\n              Try Next Source\n            </button>\n          )}\n          <button\n            onClick={loadVideoSources}\n            className=\"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-full transition-colors\"\n          >\n            <RotateCcw className=\"w-4 h-4\" />\n            Reload Sources\n          </button>\n        </div>\n      )}\n\n      {/* Video Player */}\n      {videoUrl && !loading && !error && (\n        <div className=\"relative w-full h-full max-w-7xl max-h-full\">\n          <iframe\n            ref={iframeRef}\n            src={videoUrl}\n            title={`Watch ${title}`}\n            className=\"w-full h-full\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n            allowFullScreen\n            onError={handleIframeError}\n          />\n          \n          {/* Source Switcher */}\n          {videoSources.length > 1 && (\n            <div className=\"absolute bottom-4 left-4 z-10\">\n              <div className=\"bg-black/80 backdrop-blur-sm rounded-lg p-3\">\n                <p className=\"text-white text-xs mb-2\">Switch Source:</p>\n                <div className=\"flex gap-2 flex-wrap\">\n                  {videoSources.map((source, index) => (\n                    <button\n                      key={index}\n                      onClick={() => setCurrentSourceIndex(index)}\n                      className={`px-3 py-1 text-xs rounded transition-colors ${\n                        index === currentSourceIndex\n                          ? 'bg-blue-600 text-white'\n                          : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                      }`}\n                    >\n                      {source.servers}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* API Configuration Notice */}\n      {!videoApi.hasConfiguredApis() && (\n        <div className=\"absolute bottom-4 left-4 right-4 bg-yellow-900/80 text-yellow-100 p-4 rounded-lg\">\n          <p className=\"text-sm\">\n            <strong>Video API Not Configured:</strong> Please add your video API URLs to environment variables.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 600, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/app/watch/%5Bmediatype%5D/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport { tmdbApi } from '@/lib/api/tmdb';\nimport VideoPlayer from '@/components/player/VideoPlayer';\nimport { Movie } from '@/lib/api/types';\n\nexport default function WatchPage() {\n  const params = useParams();\n  const router = useRouter();\n  const [media, setMedia] = useState<Movie | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const mediaType = params?.mediaType as 'movie' | 'tv';\n  const mediaId = parseInt(params?.id as string);\n\n  useEffect(() => {\n    if (mediaId && mediaType) {\n      loadMediaDetails();\n    }\n  }, [mediaId, mediaType]);\n\n  const loadMediaDetails = async () => {\n    try {\n      let data;\n      if (mediaType === 'movie') {\n        data = await tmdbApi.getMovieDetails(mediaId);\n      } else {\n        data = await tmdbApi.getTVShowDetails(mediaId);\n      }\n      setMedia(data);\n    } catch (error) {\n      console.error('Failed to load media details:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    router.back();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-white\"></div>\n      </div>\n    );\n  }\n\n  if (!media) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center text-white\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold mb-4\">Media not found</h1>\n          <button\n            onClick={() => router.back()}\n            className=\"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded\"\n          >\n            Go Back\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const title = mediaType === 'movie' ? media.title : media.name;\n\n  return (\n    <VideoPlayer\n      mediaId={mediaId}\n      mediaType={mediaType}\n      title={title || 'Unknown Title'}\n      onClose={handleClose}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAQe,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAgB;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,YAAY,mBAAA,6BAAA,OAAQ,SAAS;IACnC,MAAM,UAAU,SAAS,mBAAA,6BAAA,OAAQ,EAAE;IAEnC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,IAAI,WAAW,WAAW;gBACxB;YACF;QACF;8BAAG;QAAC;QAAS;KAAU;IAEvB,MAAM,mBAAmB;QACvB,IAAI;YACF,IAAI;YACJ,IAAI,cAAc,SAAS;gBACzB,OAAO,MAAM,qHAAA,CAAA,UAAO,CAAC,eAAe,CAAC;YACvC,OAAO;gBACL,OAAO,MAAM,qHAAA,CAAA,UAAO,CAAC,gBAAgB,CAAC;YACxC;YACA,SAAS;QACX,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,cAAc;QAClB,OAAO,IAAI;IACb;IAEA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,CAAC,OAAO;QACV,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA0B;;;;;;kCACxC,6LAAC;wBACC,SAAS,IAAM,OAAO,IAAI;wBAC1B,WAAU;kCACX;;;;;;;;;;;;;;;;;IAMT;IAEA,MAAM,QAAQ,cAAc,UAAU,MAAM,KAAK,GAAG,MAAM,IAAI;IAE9D,qBACE,6LAAC,uIAAA,CAAA,UAAW;QACV,SAAS;QACT,WAAW;QACX,OAAO,SAAS;QAChB,SAAS;;;;;;AAGf;GArEwB;;QACP,qIAAA,CAAA,YAAS;QACT,qIAAA,CAAA,YAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 730, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/rotate-ccw.js","sources":["file:///home/flex/bradflix/node_modules/lucide-react/src/icons/rotate-ccw.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '1357e3' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n];\n\n/**\n * @component @name RotateCcw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAxIDAgOS05IDkuNzUgOS43NSAwIDAgMC02Ljc0IDIuNzRMMyA4IiAvPgogIDxwYXRoIGQ9Ik0zIDN2NWg1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/rotate-ccw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RotateCcw = createLucideIcon('rotate-ccw', __iconNode);\n\nexport default RotateCcw;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAqD,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IAClF;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAY,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;CAC3C;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,SAAA,CAAA,CAAA,2KAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,AAAiB,CAAA,AAAjB,CAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA","debugId":null}}]
}