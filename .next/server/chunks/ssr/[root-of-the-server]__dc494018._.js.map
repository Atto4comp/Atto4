{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/lib/api/video-api.ts"],"sourcesContent":["// lib/api/video-api.ts\nimport axios from \"axios\";\n\nexport interface VideoSource {\n  url: string;\n  quality: string;\n  type: \"iframe\";\n  servers: string;\n  tmdbId: number;\n  mediaType: \"movie\" | \"tv\";\n}\n\n/** Read env and trim. Allow either base URLs or URL templates. */\nconst ENV = {\n  BASE: (process.env.NEXT_PUBLIC_VIDEO_API_BASE || \"\").trim(),\n  E1:   (process.env.NEXT_PUBLIC_VIDEO_EMBED_1 || \"https://iframe.pstream.mov/embed/tmdb-${type}-${id}/1/1?logo=false&tips=false&theme=noir&allinone=true&backlink=  http://192.168.70.253:3000\").trim(),\n  E2:   (process.env.NEXT_PUBLIC_VIDEO_EMBED_2 || \"\").trim(),\n  E3:   (process.env.NEXT_PUBLIC_VIDEO_EMBED_3 || \"\").trim(),\n  E4:   (process.env.NEXT_PUBLIC_VIDEO_EMBED_4 || \"\").trim(),\n};\n\n/** Global extra params (e.g. controls=0&autoplay=1) appended to every embed URL */\nconst EXTRA_PARAMS = (process.env.NEXT_PUBLIC_VIDEO_URL_PARAMS || \"\").trim();\n\n/** Providers list (fallback order). Empty strings are filtered out. */\nconst VIDEO_APIS = [\n  { name: \"Primary\",   value: ENV.E1 },\n  { name: \"Secondary\", value: ENV.E2 },\n  { name: \"Tertiary\",  value: ENV.E3 },\n  { name: \"Backup\",    value: ENV.E4 },\n  { name: \"Base\",      value: ENV.BASE }, // optional global base\n].filter(p => !!p.value);\n\n/** Build the default embed path when provider is a base URL (not a template). */\nfunction buildEmbedPath(\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n) {\n  if (mediaType === \"movie\") return `/movie/${tmdbId}`;\n  if (season && episode) return `/tv/${tmdbId}/${season}/${episode}`;\n  return `/tv/${tmdbId}`;\n}\n\n/** Returns true if the provider uses placeholders like ${id} */\nfunction isTemplate(u: string) {\n  return /\\$\\{id\\}/.test(u);\n}\n\n/** Normalize base URL (remove trailing slash) */\nfunction normalizeBase(u: string) {\n  return u.endsWith(\"/\") ? u.slice(0, -1) : u;\n}\n\n/** Append query string safely */\nfunction appendParams(url: string, params: string) {\n  if (!params) return url;\n  return url + (url.includes(\"?\") ? \"&\" : \"?\") + params;\n}\n\n/** Build a raw URL from template OR base (no params yet). */\nfunction buildRawUrl(\n  providerValue: string,\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n) {\n  if (isTemplate(providerValue)) {\n    // Template mode: replace placeholders\n    // Supported placeholders: ${id}, ${type}, ${season}, ${episode}\n    return providerValue\n      .replace(/\\$\\{id\\}/g, String(tmdbId))\n      .replace(/\\$\\{type\\}/g, mediaType)\n      .replace(/\\$\\{season\\}/g, season ? String(season) : \"\")\n      .replace(/\\$\\{episode\\}/g, episode ? String(episode) : \"\");\n  }\n  // Base mode: append our canonical path\n  const base = normalizeBase(providerValue);\n  return `${base}${buildEmbedPath(mediaType, tmdbId, season, episode)}`;\n}\n\n/** Public: Build final playable URL (includes EXTRA_PARAMS automatically). */\nexport function buildEmbedUrl(\n  providerValue: string,\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n) {\n  const raw = buildRawUrl(providerValue, mediaType, tmdbId, season, episode);\n  return appendParams(raw, EXTRA_PARAMS);\n}\n\n/** Convenience to get URL by provider index */\nexport function buildEmbedUrlFromIndex(\n  providerIndex: number,\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n) {\n  const prov = VIDEO_APIS[providerIndex];\n  if (!prov) return \"\";\n  return buildEmbedUrl(prov.value, mediaType, tmdbId, season, episode);\n}\n\nfunction toSource(\n  provName: string,\n  value: string,\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n): VideoSource {\n  return {\n    url: buildEmbedUrl(value, mediaType, tmdbId, season, episode),\n    quality: \"HD\",\n    type: \"iframe\",\n    servers: provName,\n    tmdbId,\n    mediaType,\n  };\n}\n\n/** Robust TMDB id resolver (supports numeric or IMDb tt... ids). */\nexport async function resolveTmdbId(\n  input: string | number,\n  type: \"movie\" | \"tv\"\n): Promise<number | null> {\n  // numeric?\n  if (typeof input === \"number\" && Number.isFinite(input)) return input;\n  const s = String(input).trim();\n  const asNum = Number(s);\n  if (Number.isFinite(asNum)) return asNum;\n\n  // IMDb id?\n  if (/^tt\\d+$/i.test(s)) {\n    const API_KEY = (process.env.NEXT_PUBLIC_TMDB_API_KEY || \"\").trim();\n    if (!API_KEY) return null;\n    try {\n      const { data } = await axios.get(\n        `https://api.themoviedb.org/3/find/${s}`,\n        { params: { api_key: API_KEY, external_source: \"imdb_id\" } }\n      );\n      const arr = type === \"movie\" ? data.movie_results : data.tv_results;\n      return arr?.[0]?.id ?? null;\n    } catch {\n      return null;\n    }\n  }\n\n  return null;\n}\n\nexport const videoApi = {\n  hasConfiguredApis(): boolean {\n    return VIDEO_APIS.length > 0;\n  },\n\n  getConfigStatus() {\n    return {\n      configured: VIDEO_APIS.length,\n      apis: VIDEO_APIS.map(a => ({ name: a.name, configured: !!a.value })),\n    };\n  },\n\n  async getMovieSources(tmdbId: number): Promise<VideoSource[]> {\n    return VIDEO_APIS.map(p => toSource(p.name, p.value, \"movie\", tmdbId));\n  },\n\n  async getTVSources(tmdbId: number, season?: number, episode?: number): Promise<VideoSource[]> {\n    return VIDEO_APIS.map(p => toSource(p.name, p.value, \"tv\", tmdbId, season, episode));\n  },\n\n  async getMovieWithEmbed(tmdbId: number) {\n    const API_KEY = (process.env.NEXT_PUBLIC_TMDB_API_KEY || \"\").trim();\n    try {\n      const movie = API_KEY\n        ? (await axios.get(`https://api.themoviedb.org/3/movie/${tmdbId}`, { params: { api_key: API_KEY } })).data\n        : null;\n      const sources = await this.getMovieSources(tmdbId);\n      return { movie, embedUrl: sources[0]?.url || \"\", sources };\n    } catch {\n      return { movie: null, embedUrl: \"\", sources: [] };\n    }\n  },\n\n  async getTVShowWithEmbed(tmdbId: number, season?: number, episode?: number) {\n    const API_KEY = (process.env.NEXT_PUBLIC_TMDB_API_KEY || \"\").trim();\n    try {\n      const tvShow = API_KEY\n        ? (await axios.get(`https://api.themoviedb.org/3/tv/${tmdbId}`, { params: { api_key: API_KEY } })).data\n        : null;\n      const sources = await this.getTVSources(tmdbId, season, episode);\n      return { tvShow, embedUrl: sources[0]?.url || \"\", sources };\n    } catch {\n      return { tvShow: null, embedUrl: \"\", sources: [] };\n    }\n  },\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/lib/api/tmdb.ts"],"sourcesContent":["import axios from 'axios';\nimport type { Movie, TVShow, Genre, MediaDetails } from './types';\n\nconst TMDB_BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = (process.env.NEXT_PUBLIC_TMDB_API_KEY || '').trim();\n\n// Warn at startup (non-fatal) so missing env doesn't crash the app on import\nif (!API_KEY) {\n  console.warn('[tmdb] WARNING: NEXT_PUBLIC_TMDB_API_KEY is not set. TMDB requests will fail until provided.');\n}\n\nconst tmdbClient = axios.create({\n  baseURL: TMDB_BASE_URL,\n  timeout: 20000,\n  headers: {\n    Accept: 'application/json',\n    'User-Agent': 'Bradfilx/1.0',\n  },\n});\n\n/**\n * Low-level request helper with retries and clear error classification.\n */\nasync function request<T = any>(\n  url: string,\n  params?: Record<string, any>,\n  maxRetries = 3\n): Promise<T> {\n  if (!API_KEY) {\n    throw new Error('Missing NEXT_PUBLIC_TMDB_API_KEY at runtime');\n  }\n\n  const requestParams = { api_key: API_KEY, ...(params || {}) };\n\n  for (let attempt = 1; attempt <= maxRetries; attempt++) {\n    try {\n      const res = await tmdbClient.get<T>(url, { params: requestParams });\n      return res.data;\n    } catch (err: any) {\n      const isLastAttempt = attempt === maxRetries;\n      const status = err?.response?.status;\n      const statusText = err?.response?.statusText;\n      const serverMsg = err?.response?.data ? JSON.stringify(err.response.data).slice(0, 400) : '';\n\n      if (status === 404) {\n        throw new Error(`TMDB 404: resource not found (${url})`);\n      }\n      if (status === 401) {\n        throw new Error('TMDB 401: Invalid or unauthorized API key.');\n      }\n\n      const isNetworkError = !!err?.code && ['ENOTFOUND', 'ECONNABORTED', 'ECONNRESET', 'ETIMEDOUT'].includes(err.code);\n\n      if (isLastAttempt) {\n        let msg = `TMDB request failed (${url})`;\n        if (status) msg += ` status=${status}${statusText ? ` ${statusText}` : ''}`;\n        if (err.message) msg += ` message=${err.message}`;\n        if (serverMsg) msg += ` server=${serverMsg}`;\n        throw new Error(msg);\n      }\n\n      const delayMs = Math.pow(2, attempt - 1) * 500;\n      await new Promise((resolve) => setTimeout(resolve, delayMs));\n    }\n  }\n\n  throw new Error('Unexpected error in TMDB request retry loop');\n}\n\nexport const tmdbApi = {\n  async getTrending(timeWindow: 'day' | 'week' = 'week'): Promise<Movie[]> {\n    try {\n      const data = await request<{ results: Movie[] }>(`/trending/movie/${timeWindow}`);\n      return data.results || [];\n    } catch (error) {\n      console.warn('[tmdbApi] getTrending failed:', (error as Error).message);\n      return [];\n    }\n  },\n\n  async getTVTrending(timeWindow: 'day' | 'week' = 'week'): Promise<TVShow[]> {\n    try {\n      const data = await request<{ results: TVShow[] }>(`/trending/tv/${timeWindow}`);\n      return data.results || [];\n    } catch (error) {\n      console.warn('[tmdbApi] getTVTrending failed:', (error as Error).message);\n      return [];\n    }\n  },\n\n  async getPopularMovies(page: number = 1): Promise<{ results: Movie[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: Movie[]; total_pages: number }>('/movie/popular', { page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getPopularMovies failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getTopRatedMovies(page: number = 1): Promise<{ results: Movie[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: Movie[]; total_pages: number }>('/movie/top_rated', { page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getTopRatedMovies failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getUpcomingMovies(page: number = 1): Promise<{ results: Movie[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: Movie[]; total_pages: number }>('/movie/upcoming', { page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getUpcomingMovies failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getNowPlayingMovies(page: number = 1): Promise<{ results: Movie[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: Movie[]; total_pages: number }>('/movie/now_playing', { page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getNowPlayingMovies failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getPopularTVShows(page: number = 1): Promise<{ results: TVShow[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: TVShow[]; total_pages: number }>('/tv/popular', { page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getPopularTVShows failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getTopRatedTVShows(page: number = 1): Promise<{ results: TVShow[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: TVShow[]; total_pages: number }>('/tv/top_rated', { page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getTopRatedTVShows failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getOnTheAirTVShows(page: number = 1): Promise<{ results: TVShow[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: TVShow[]; total_pages: number }>('/tv/on_the_air', { page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getOnTheAirTVShows failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getAiringTodayTVShows(page: number = 1): Promise<{ results: TVShow[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: TVShow[]; total_pages: number }>('/tv/airing_today', { page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getAiringTodayTVShows failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getTVByCategory(category: string, page: number = 1): Promise<{ results: TVShow[]; total_pages: number }> {\n    try {\n      let endpoint = '/tv/popular';\n      switch (category) {\n        case 'popular':\n          endpoint = '/tv/popular';\n          break;\n        case 'top-rated':\n          endpoint = '/tv/top_rated';\n          break;\n        case 'on-the-air':\n          endpoint = '/tv/on_the_air';\n          break;\n        case 'airing-today':\n          endpoint = '/tv/airing_today';\n          break;\n        default:\n          endpoint = '/tv/popular';\n      }\n      const data = await request<{ results: TVShow[]; total_pages: number }>(endpoint, { page });\n      const filteredResults = (data.results || []).filter((item) => !!item.name && !!item.first_air_date);\n      return { results: filteredResults, total_pages: data.total_pages || 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getTVByCategory failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async discoverTVShows(params: {\n    page?: number;\n    genreId?: number;\n    sortBy?: string;\n    year?: number;\n    minRating?: number;\n  } = {}): Promise<{ results: TVShow[]; total_pages: number }> {\n    try {\n      const requestParams: any = {\n        page: params.page || 1,\n        sort_by: params.sortBy || 'popularity.desc',\n        'vote_count.gte': 10,\n      };\n      if (params.genreId) requestParams.with_genres = params.genreId;\n      if (params.year) requestParams.first_air_date_year = params.year;\n      if (params.minRating) requestParams['vote_average.gte'] = params.minRating;\n\n      const data = await request<{ results: TVShow[]; total_pages: number }>('/discover/tv', requestParams);\n      const filteredResults = (data.results || []).filter((show) => !!show.name && !!show.first_air_date);\n      return { results: filteredResults, total_pages: data.total_pages || 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] discoverTVShows failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getLatestReleases(mediaType: 'movie' | 'tv' = 'movie', page: number = 1, genreId?: number): Promise<{ results: any[]; total_pages: number }> {\n    try {\n      const today = new Date().toISOString().split('T')[0];\n      const params: any = {\n        sort_by: mediaType === 'tv' ? 'first_air_date.desc' : 'release_date.desc',\n        page,\n        'vote_count.gte': 10,\n      };\n      if (mediaType === 'movie') params['release_date.lte'] = today;\n      if (mediaType === 'tv') params['first_air_date.lte'] = today;\n      if (genreId) params.with_genres = genreId;\n\n      const data = await request(`/discover/${mediaType}`, params);\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getLatestReleases failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async searchMulti(query: string, params?: { page?: number }): Promise<{ results: any[]; total_pages: number }> {\n    try {\n      const data = await request('/search/multi', { query, ...(params || {}) });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] searchMulti failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async searchMovies(query: string, page: number = 1): Promise<{ results: Movie[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: Movie[]; total_pages: number }>('/search/movie', { query, page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] searchMovies failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async searchTVShows(query: string, page: number = 1): Promise<{ results: TVShow[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: TVShow[]; total_pages: number }>('/search/tv', { query, page });\n      const filteredResults = (data.results || []).filter((show) => !!show.name && !!show.first_air_date);\n      return { results: filteredResults, total_pages: data.total_pages || 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] searchTVShows failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getMovieDetails(id: number): Promise<MediaDetails | null> {\n    try {\n      const data = await request<MediaDetails>(`/movie/${id}`, {\n        append_to_response: 'credits,videos,similar,recommendations',\n      });\n      return data || null;\n    } catch (error) {\n      console.warn('[tmdbApi] getMovieDetails failed:', (error as Error).message);\n      return null;\n    }\n  },\n\n  async getTVShowDetails(id: number): Promise<MediaDetails | null> {\n    try {\n      const data = await request<MediaDetails>(`/tv/${id}`, {\n        append_to_response: 'credits,videos,similar,recommendations',\n      });\n      return data || null;\n    } catch (error) {\n      console.warn('[tmdbApi] getTVShowDetails failed:', (error as Error).message);\n      return null;\n    }\n  },\n\n  async getMovieGenres(): Promise<Genre[]> {\n    try {\n      const data = await request<{ genres: Genre[] }>('/genre/movie/list');\n      return data.genres || [];\n    } catch (error) {\n      console.warn('[tmdbApi] getMovieGenres failed:', (error as Error).message);\n      return [];\n    }\n  },\n\n  async getTVGenres(): Promise<Genre[]> {\n    try {\n      const data = await request<{ genres: Genre[] }>('/genre/tv/list');\n      return data.genres || [];\n    } catch (error) {\n      console.warn('[tmdbApi] getTVGenres failed:', (error as Error).message);\n      return [];\n    }\n  },\n\n  async getAllGenres(): Promise<{ movieGenres: Genre[]; tvGenres: Genre[] }> {\n    try {\n      const [movieGenres, tvGenres] = await Promise.all([this.getMovieGenres(), this.getTVGenres()]);\n      return { movieGenres, tvGenres };\n    } catch (error) {\n      console.warn('[tmdbApi] getAllGenres failed:', (error as Error).message);\n      return { movieGenres: [], tvGenres: [] };\n    }\n  },\n\n  async getMoviesByGenre(genreId: number, page: number = 1): Promise<{ results: Movie[]; total_pages: number }> {\n    try {\n      const data = await request<{ results: Movie[]; total_pages: number }>('/discover/movie', { with_genres: genreId, page });\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] getMoviesByGenre failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async getTVShowsByGenre(genreId: number, page: number = 1): Promise<{ results: TVShow[]; total_pages: number }> {\n    try {\n      return await this.discoverTVShows({ page, genreId, sortBy: 'popularity.desc' });\n    } catch (error) {\n      console.warn('[tmdbApi] getTVShowsByGenre failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async discover(mediaType: 'movie' | 'tv', sortBy = 'popularity.desc', page = 1, genreId?: number): Promise<{ results: any[]; total_pages: number }> {\n    try {\n      const params: any = { sort_by: sortBy, page };\n      if (genreId) params.with_genres = genreId;\n      const data = await request(`/discover/${mediaType}`, params);\n      return data || { results: [], total_pages: 0 };\n    } catch (error) {\n      console.warn('[tmdbApi] discover failed:', (error as Error).message);\n      return { results: [], total_pages: 0 };\n    }\n  },\n\n  async testConnection(): Promise<{ success: boolean; message: string }> {\n    try {\n      const data = await request('/configuration');\n      if (data && data.images) {\n        return { success: true, message: 'Connected successfully to TMDB API' };\n      }\n      return { success: false, message: 'Unexpected response from TMDB configuration' };\n    } catch (error: any) {\n      return { success: false, message: error.message || 'Unknown connection error' };\n    }\n  },\n\n  /* -----------------------------------------------------------\n   *  Unified helper so components never guess the media type.\n   *  Usage: await tmdbApi.getDetails(id, 'movie' | 'tv')\n   * ----------------------------------------------------------*/\n  async getDetails(id: number, type: 'movie' | 'tv') {\n    return type === 'movie'\n      ? this.getMovieDetails(id)\n      : this.getTVShowDetails(id);\n  },\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/app/watch/%5Bmediatype%5D/%5Bid%5D/page.tsx"],"sourcesContent":["// app/watch/[mediatype]/[id]/page.tsx\nimport { notFound } from \"next/navigation\";\nimport { videoApi, resolveTmdbId } from \"@/lib/api/video-api\";\nimport { tmdbApi } from \"@/lib/api/tmdb\";\n\ntype Params = { mediatype: string; id: string };\n\nexport default async function WatchMedia({ params }: { params: Promise<Params> }) {\n  const { mediatype, id } = await params;                 // ⬅️ required on Next 15\n  const mediaType: \"movie\" | \"tv\" = mediatype === \"movie\" ? \"movie\" : \"tv\";\n\n  const tmdbId = await resolveTmdbId(id, mediaType);\n  if (!tmdbId) return notFound();\n\n  const sources =\n    mediaType === \"movie\"\n      ? await videoApi.getMovieSources(tmdbId)\n      : await videoApi.getTVSources(tmdbId);\n\n  const embedUrl = sources[0]?.url || \"\";\n\n  const media =\n    mediaType === \"movie\"\n      ? await tmdbApi.getMovieDetails(tmdbId)\n      : await tmdbApi.getTVShowDetails(tmdbId);\n\n  const title = (media as any)?.title || (media as any)?.name || \"Untitled\";\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      <div className=\"p-4\">\n        <h1 className=\"text-2xl font-bold mb-4\">{title}</h1>\n\n        {!embedUrl && (\n          <div className=\"mb-4 text-yellow-300\">\n            No embed providers configured. Add{\" \"}\n            <code>NEXT_PUBLIC_VIDEO_EMBED_1..4</code> or{\" \"}\n            <code>NEXT_PUBLIC_VIDEO_API_BASE</code> in <code>.env.local</code>.\n          </div>\n        )}\n\n        <div className=\"w-full h-[80vh]\">\n          {embedUrl ? (\n            <iframe\n              src={embedUrl}\n              className=\"w-full h-full rounded-lg\"\n              allowFullScreen\n              frameBorder=\"0\"\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            />\n          ) : (\n            <div className=\"w-full h-full grid place-items-center bg-neutral-900 rounded-lg\">\n              <p className=\"text-neutral-300\">No video source available.</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;AACtC;AAAA;AACA;AACA;;;;;AAIe,eAAe,WAAW,EAAE,MAAM,EAA+B;IAC9E,MAAM,EAAE,SAAS,EAAE,EAAE,EAAE,GAAG,MAAM,QAAwB,yBAAyB;IACjF,MAAM,YAA4B,cAAc,UAAU,UAAU;IAEpE,MAAM,SAAS,MAAM,CAAA,GAAA,0HAAA,CAAA,gBAAa,AAAD,EAAE,IAAI;IACvC,IAAI,CAAC,QAAQ,OAAO,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD;IAE3B,MAAM,UACJ,cAAc,UACV,MAAM,0HAAA,CAAA,WAAQ,CAAC,eAAe,CAAC,UAC/B,MAAM,0HAAA,CAAA,WAAQ,CAAC,YAAY,CAAC;IAElC,MAAM,WAAW,OAAO,CAAC,EAAE,EAAE,OAAO;IAEpC,MAAM,QACJ,cAAc,UACV,MAAM,kHAAA,CAAA,UAAO,CAAC,eAAe,CAAC,UAC9B,MAAM,kHAAA,CAAA,UAAO,CAAC,gBAAgB,CAAC;IAErC,MAAM,QAAQ,AAAC,OAAe,SAAU,OAAe,QAAQ;IAE/D,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA2B;;;;;;gBAExC,CAAC,0BACA,8OAAC;oBAAI,WAAU;;wBAAuB;wBACD;sCACnC,8OAAC;sCAAK;;;;;;wBAAmC;wBAAI;sCAC7C,8OAAC;sCAAK;;;;;;wBAAiC;sCAAI,8OAAC;sCAAK;;;;;;wBAAiB;;;;;;;8BAItE,8OAAC;oBAAI,WAAU;8BACZ,yBACC,8OAAC;wBACC,KAAK;wBACL,WAAU;wBACV,eAAe;wBACf,aAAY;wBACZ,OAAM;;;;;6CAGR,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9C","debugId":null}}]
}