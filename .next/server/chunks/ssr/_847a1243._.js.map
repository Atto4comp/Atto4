{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/app/search/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { useSearchParams } from 'next/navigation';\nimport { Search, Loader2 } from 'lucide-react';\n\nexport default function SearchPage() {\n  const searchParams = useSearchParams();\n  const query = searchParams.get('q') || '';\n\n  const [results, setResults] = useState<any[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Helper function to build TMDB image URLs\n  const buildTmdbImage = (path: string, size = 'w500') => {\n    if (!path) return '/placeholder-movie.jpg';\n    return `https://image.tmdb.org/t/p/${size}${path}`;\n  };\n\n  useEffect(() => {\n    if (!query.trim()) {\n      setResults([]);\n      return;\n    }\n\n    const fetchResults = async () => {\n      setLoading(true);\n      setError('');\n      \n      try {\n        // ✅ Call our proxy API instead of TMDB directly\n        const res = await fetch(`/api/tmdb/search?q=${encodeURIComponent(query)}`);\n        if (!res.ok) throw new Error(`API error: ${res.status}`);\n\n        const data = await res.json();\n\n        if (data?.results) {\n          // Filter and sort results\n          const filtered = data.results\n            .filter(\n              (item: any) =>\n                (item.media_type === 'movie' || item.media_type === 'tv') &&\n                item.poster_path &&\n                item.popularity > 0\n            )\n            .sort((a: any, b: any) => (b.popularity || 0) - (a.popularity || 0));\n\n          setResults(filtered);\n        } else {\n          setResults([]);\n        }\n      } catch (err) {\n        console.error('Search error:', err);\n        setError('Failed to load results. Please try again.');\n        setResults([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    // Debounce search with 300ms delay\n    const timeoutId = setTimeout(fetchResults, 300);\n    return () => clearTimeout(timeoutId);\n  }, [query]);\n\n  return (\n    <main className=\"min-h-screen bg-black text-white\">\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        {/* Simple Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-2xl font-semibold mb-2\">Search Results</h1>\n          {query && (\n            <p className=\"text-gray-400\">\n              Results for \"{query}\" {!loading && results.length > 0 && `(${results.length})`}\n            </p>\n          )}\n        </div>\n\n        {/* Loading State */}\n        {loading && (\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n            <span className=\"ml-3 text-gray-400\">Searching...</span>\n          </div>\n        )}\n\n        {/* Error State */}\n        {error && (\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"text-center\">\n              <p className=\"text-red-400 mb-2\">{error}</p>\n              <button\n                onClick={() => window.location.reload()}\n                className=\"text-blue-400 hover:text-blue-300 underline\"\n              >\n                Try Again\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* No Results */}\n        {!loading && !error && results.length === 0 && query && (\n          <div className=\"flex flex-col items-center justify-center py-12\">\n            <Search className=\"w-16 h-16 text-gray-600 mb-4\" />\n            <h2 className=\"text-xl font-medium text-white mb-2\">No results found</h2>\n            <p className=\"text-gray-400 text-center max-w-md\">\n              We couldn&apos;t find any movies or TV shows matching &quot;{query}&quot;. \n              Try different search terms.\n            </p>\n          </div>\n        )}\n\n        {/* Results Grid */}\n        {!loading && !error && results.length > 0 && (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6\">\n            {results.map((item) => {\n              const isMovie = item.media_type === 'movie';\n              const title = isMovie ? item.title : item.name;\n              const releaseDate = isMovie ? item.release_date : item.first_air_date;\n              const year = releaseDate ? new Date(releaseDate).getFullYear() : null;\n              const posterUrl = buildTmdbImage(item.poster_path, 'w500');\n\n              return (\n                <Link\n                  key={`${item.media_type}-${item.id}`}\n                  href={`/${item.media_type}/${item.id}`}\n                  className=\"group\"\n                >\n                  <div className=\"relative aspect-[2/3] rounded-lg overflow-hidden bg-gray-800 transition-transform duration-200 group-hover:scale-105\">\n                    <Image\n                      src={posterUrl}\n                      alt={title || 'Movie/TV Show Poster'}\n                      fill\n                      className=\"object-cover\"\n                      sizes=\"(max-width: 640px) 50vw, (max-width: 768px) 33vw, (max-width: 1024px) 25vw, 200px\"\n                    />\n                    \n                    {/* Simple Rating Badge */}\n                    {item.vote_average > 0 && (\n                      <div className=\"absolute top-2 right-2 bg-black/80 backdrop-blur-sm text-white px-2 py-1 rounded text-xs font-medium\">\n                        ⭐ {item.vote_average.toFixed(1)}\n                      </div>\n                    )}\n\n                    {/* Media Type Badge */}\n                    <div className=\"absolute top-2 left-2 bg-gray-900/80 backdrop-blur-sm text-gray-300 px-2 py-1 rounded text-xs font-medium\">\n                      {isMovie ? 'Movie' : 'TV'}\n                    </div>\n                  </div>\n\n                  {/* Title and Year */}\n                  <div className=\"mt-3\">\n                    <h3 className=\"font-medium text-sm leading-tight line-clamp-2 mb-1\">\n                      {title}\n                    </h3>\n                    <p className=\"text-gray-400 text-xs\">\n                      {year || 'Unknown'}\n                    </p>\n                  </div>\n                </Link>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Empty State */}\n        {!loading && !error && results.length === 0 && !query && (\n          <div className=\"flex flex-col items-center justify-center py-20\">\n            <Search className=\"w-16 h-16 text-gray-600 mb-4\" />\n            <h2 className=\"text-xl font-medium text-white mb-2\">Start searching</h2>\n            <p className=\"text-gray-400 text-center max-w-md\">\n              Use the search bar to find movies and TV shows.\n            </p>\n          </div>\n        )}\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/loader-circle.js","sources":["file:///home/flex/bradflix/node_modules/lucide-react/src/icons/loader-circle.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }]];\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('loader-circle', __iconNode);\n\nexport default LoaderCircle;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAuB;IAAC;QAAC,MAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,6BAAA,CAAA;YAA+B,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAC;CAAA;AAalG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,YAAA,CAAA,CAAA,wKAAe,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,AAAiB,CAAA,AAAjB,CAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA","debugId":null}}]
}