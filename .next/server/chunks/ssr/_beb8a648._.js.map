{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/lib/storage/watchlist.ts"],"sourcesContent":["'use client';\n\n// Types for watchlist and liked items\nexport interface WatchlistItem {\n  id: number;\n  title: string;\n  name?: string;\n  poster_path: string | null;\n  media_type: 'movie' | 'tv';\n  vote_average: number;\n  release_date?: string;\n  first_air_date?: string;\n  dateAdded: string;\n}\n\n// Watchlist functions\nexport const watchlistStorage = {\n  getWatchlist: (): WatchlistItem[] => {\n    if (typeof window === 'undefined') return [];\n    try {\n      const watchlist = localStorage.getItem('bradfilx_watchlist');\n      return watchlist ? JSON.parse(watchlist) : [];\n    } catch (error) {\n      console.error('Error getting watchlist:', error);\n      return [];\n    }\n  },\n\n  addToWatchlist: (item: Omit<WatchlistItem, 'dateAdded'>): boolean => {\n    if (typeof window === 'undefined') return false;\n    try {\n      const watchlist = watchlistStorage.getWatchlist();\n      const exists = watchlist.some(w => w.id === item.id && w.media_type === item.media_type);\n      \n      if (!exists) {\n        const newItem: WatchlistItem = {\n          ...item,\n          dateAdded: new Date().toISOString()\n        };\n        watchlist.unshift(newItem); // Add to beginning\n        localStorage.setItem('bradfilx_watchlist', JSON.stringify(watchlist));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Error adding to watchlist:', error);\n      return false;\n    }\n  },\n\n  removeFromWatchlist: (id: number, mediaType: 'movie' | 'tv'): boolean => {\n    if (typeof window === 'undefined') return false;\n    try {\n      const watchlist = watchlistStorage.getWatchlist();\n      const filtered = watchlist.filter(item => !(item.id === id && item.media_type === mediaType));\n      localStorage.setItem('bradfilx_watchlist', JSON.stringify(filtered));\n      return true;\n    } catch (error) {\n      console.error('Error removing from watchlist:', error);\n      return false;\n    }\n  },\n\n  isInWatchlist: (id: number, mediaType: 'movie' | 'tv'): boolean => {\n    if (typeof window === 'undefined') return false;\n    const watchlist = watchlistStorage.getWatchlist();\n    return watchlist.some(item => item.id === id && item.media_type === mediaType);\n  },\n\n  clearWatchlist: (): void => {\n    if (typeof window === 'undefined') return;\n    localStorage.removeItem('bradfilx_watchlist');\n  }\n};\n\n// Liked content functions\nexport const likedStorage = {\n  getLiked: (): WatchlistItem[] => {\n    if (typeof window === 'undefined') return [];\n    try {\n      const liked = localStorage.getItem('bradfilx_liked');\n      return liked ? JSON.parse(liked) : [];\n    } catch (error) {\n      console.error('Error getting liked items:', error);\n      return [];\n    }\n  },\n\n  addToLiked: (item: Omit<WatchlistItem, 'dateAdded'>): boolean => {\n    if (typeof window === 'undefined') return false;\n    try {\n      const liked = likedStorage.getLiked();\n      const exists = liked.some(l => l.id === item.id && l.media_type === item.media_type);\n      \n      if (!exists) {\n        const newItem: WatchlistItem = {\n          ...item,\n          dateAdded: new Date().toISOString()\n        };\n        liked.unshift(newItem); // Add to beginning\n        localStorage.setItem('bradfilx_liked', JSON.stringify(liked));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Error adding to liked:', error);\n      return false;\n    }\n  },\n\n  removeFromLiked: (id: number, mediaType: 'movie' | 'tv'): boolean => {\n    if (typeof window === 'undefined') return false;\n    try {\n      const liked = likedStorage.getLiked();\n      const filtered = liked.filter(item => !(item.id === id && item.media_type === mediaType));\n      localStorage.setItem('bradfilx_liked', JSON.stringify(filtered));\n      return true;\n    } catch (error) {\n      console.error('Error removing from liked:', error);\n      return false;\n    }\n  },\n\n  isLiked: (id: number, mediaType: 'movie' | 'tv'): boolean => {\n    if (typeof window === 'undefined') return false;\n    const liked = likedStorage.getLiked();\n    return liked.some(item => item.id === id && item.media_type === mediaType);\n  },\n\n  clearLiked: (): void => {\n    if (typeof window === 'undefined') return;\n    localStorage.removeItem('bradfilx_liked');\n  }\n};\n"],"names":[],"mappings":";;;;AAAA;AAgBO,MAAM,mBAAmB;IAC9B,cAAc;QACZ,wCAAmC,OAAO,EAAE;;;IAQ9C;IAEA,gBAAgB,CAAC;QACf,wCAAmC,OAAO;;;IAmB5C;IAEA,qBAAqB,CAAC,IAAY;QAChC,wCAAmC,OAAO;;;IAU5C;IAEA,eAAe,CAAC,IAAY;QAC1B,wCAAmC,OAAO;;;QAC1C,MAAM;IAER;IAEA,gBAAgB;QACd,wCAAmC;;;IAErC;AACF;AAGO,MAAM,eAAe;IAC1B,UAAU;QACR,wCAAmC,OAAO,EAAE;;;IAQ9C;IAEA,YAAY,CAAC;QACX,wCAAmC,OAAO;;;IAmB5C;IAEA,iBAAiB,CAAC,IAAY;QAC5B,wCAAmC,OAAO;;;IAU5C;IAEA,SAAS,CAAC,IAAY;QACpB,wCAAmC,OAAO;;;QAC1C,MAAM;IAER;IAEA,YAAY;QACV,wCAAmC;;;IAErC;AACF","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/lib/api/video-api.ts"],"sourcesContent":["// lib/api/video-api.ts\nimport axios from \"axios\";\n\nexport interface VideoSource {\n  url: string;\n  quality: string;\n  type: \"iframe\";\n  servers: string;\n  tmdbId: number;\n  mediaType: \"movie\" | \"tv\";\n}\n\n/** Read env and trim. Allow either base URLs or URL templates. */\nconst ENV = {\n  BASE: (process.env.NEXT_PUBLIC_VIDEO_API_BASE || \"\").trim(),\n  E1:   (process.env.NEXT_PUBLIC_VIDEO_EMBED_1 || \"https://iframe.pstream.mov/embed/tmdb-${type}-${id}/1/1?logo=false&tips=false&theme=noir&allinone=true&backlink=  http://192.168.70.253:3000\").trim(),\n  E2:   (process.env.NEXT_PUBLIC_VIDEO_EMBED_2 || \"\").trim(),\n  E3:   (process.env.NEXT_PUBLIC_VIDEO_EMBED_3 || \"\").trim(),\n  E4:   (process.env.NEXT_PUBLIC_VIDEO_EMBED_4 || \"\").trim(),\n};\n\n/** Global extra params (e.g. controls=0&autoplay=1) appended to every embed URL */\nconst EXTRA_PARAMS = (process.env.NEXT_PUBLIC_VIDEO_URL_PARAMS || \"\").trim();\n\n/** Providers list (fallback order). Empty strings are filtered out. */\nconst VIDEO_APIS = [\n  { name: \"Primary\",   value: ENV.E1 },\n  { name: \"Secondary\", value: ENV.E2 },\n  { name: \"Tertiary\",  value: ENV.E3 },\n  { name: \"Backup\",    value: ENV.E4 },\n  { name: \"Base\",      value: ENV.BASE }, // optional global base\n].filter(p => !!p.value);\n\n/** Build the default embed path when provider is a base URL (not a template). */\nfunction buildEmbedPath(\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n) {\n  if (mediaType === \"movie\") return `/movie/${tmdbId}`;\n  if (season && episode) return `/tv/${tmdbId}/${season}/${episode}`;\n  return `/tv/${tmdbId}`;\n}\n\n/** Returns true if the provider uses placeholders like ${id} */\nfunction isTemplate(u: string) {\n  return /\\$\\{id\\}/.test(u);\n}\n\n/** Normalize base URL (remove trailing slash) */\nfunction normalizeBase(u: string) {\n  return u.endsWith(\"/\") ? u.slice(0, -1) : u;\n}\n\n/** Append query string safely */\nfunction appendParams(url: string, params: string) {\n  if (!params) return url;\n  return url + (url.includes(\"?\") ? \"&\" : \"?\") + params;\n}\n\n/** Build a raw URL from template OR base (no params yet). */\nfunction buildRawUrl(\n  providerValue: string,\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n) {\n  if (isTemplate(providerValue)) {\n    // Template mode: replace placeholders\n    // Supported placeholders: ${id}, ${type}, ${season}, ${episode}\n    return providerValue\n      .replace(/\\$\\{id\\}/g, String(tmdbId))\n      .replace(/\\$\\{type\\}/g, mediaType)\n      .replace(/\\$\\{season\\}/g, season ? String(season) : \"\")\n      .replace(/\\$\\{episode\\}/g, episode ? String(episode) : \"\");\n  }\n  // Base mode: append our canonical path\n  const base = normalizeBase(providerValue);\n  return `${base}${buildEmbedPath(mediaType, tmdbId, season, episode)}`;\n}\n\n/** Public: Build final playable URL (includes EXTRA_PARAMS automatically). */\nexport function buildEmbedUrl(\n  providerValue: string,\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n) {\n  const raw = buildRawUrl(providerValue, mediaType, tmdbId, season, episode);\n  return appendParams(raw, EXTRA_PARAMS);\n}\n\n/** Convenience to get URL by provider index */\nexport function buildEmbedUrlFromIndex(\n  providerIndex: number,\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n) {\n  const prov = VIDEO_APIS[providerIndex];\n  if (!prov) return \"\";\n  return buildEmbedUrl(prov.value, mediaType, tmdbId, season, episode);\n}\n\nfunction toSource(\n  provName: string,\n  value: string,\n  mediaType: \"movie\" | \"tv\",\n  tmdbId: number,\n  season?: number,\n  episode?: number\n): VideoSource {\n  return {\n    url: buildEmbedUrl(value, mediaType, tmdbId, season, episode),\n    quality: \"HD\",\n    type: \"iframe\",\n    servers: provName,\n    tmdbId,\n    mediaType,\n  };\n}\n\n/** Robust TMDB id resolver (supports numeric or IMDb tt... ids). */\nexport async function resolveTmdbId(\n  input: string | number,\n  type: \"movie\" | \"tv\"\n): Promise<number | null> {\n  // numeric?\n  if (typeof input === \"number\" && Number.isFinite(input)) return input;\n  const s = String(input).trim();\n  const asNum = Number(s);\n  if (Number.isFinite(asNum)) return asNum;\n\n  // IMDb id?\n  if (/^tt\\d+$/i.test(s)) {\n    const API_KEY = (process.env.NEXT_PUBLIC_TMDB_API_KEY || \"\").trim();\n    if (!API_KEY) return null;\n    try {\n      const { data } = await axios.get(\n        `https://api.themoviedb.org/3/find/${s}`,\n        { params: { api_key: API_KEY, external_source: \"imdb_id\" } }\n      );\n      const arr = type === \"movie\" ? data.movie_results : data.tv_results;\n      return arr?.[0]?.id ?? null;\n    } catch {\n      return null;\n    }\n  }\n\n  return null;\n}\n\nexport const videoApi = {\n  hasConfiguredApis(): boolean {\n    return VIDEO_APIS.length > 0;\n  },\n\n  getConfigStatus() {\n    return {\n      configured: VIDEO_APIS.length,\n      apis: VIDEO_APIS.map(a => ({ name: a.name, configured: !!a.value })),\n    };\n  },\n\n  async getMovieSources(tmdbId: number): Promise<VideoSource[]> {\n    return VIDEO_APIS.map(p => toSource(p.name, p.value, \"movie\", tmdbId));\n  },\n\n  async getTVSources(tmdbId: number, season?: number, episode?: number): Promise<VideoSource[]> {\n    return VIDEO_APIS.map(p => toSource(p.name, p.value, \"tv\", tmdbId, season, episode));\n  },\n\n  async getMovieWithEmbed(tmdbId: number) {\n    const API_KEY = (process.env.NEXT_PUBLIC_TMDB_API_KEY || \"\").trim();\n    try {\n      const movie = API_KEY\n        ? (await axios.get(`https://api.themoviedb.org/3/movie/${tmdbId}`, { params: { api_key: API_KEY } })).data\n        : null;\n      const sources = await this.getMovieSources(tmdbId);\n      return { movie, embedUrl: sources[0]?.url || \"\", sources };\n    } catch {\n      return { movie: null, embedUrl: \"\", sources: [] };\n    }\n  },\n\n  async getTVShowWithEmbed(tmdbId: number, season?: number, episode?: number) {\n    const API_KEY = (process.env.NEXT_PUBLIC_TMDB_API_KEY || \"\").trim();\n    try {\n      const tvShow = API_KEY\n        ? (await axios.get(`https://api.themoviedb.org/3/tv/${tmdbId}`, { params: { api_key: API_KEY } })).data\n        : null;\n      const sources = await this.getTVSources(tmdbId, season, episode);\n      return { tvShow, embedUrl: sources[0]?.url || \"\", sources };\n    } catch {\n      return { tvShow: null, embedUrl: \"\", sources: [] };\n    }\n  },\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/components/player/VideoPlayer.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { X, Settings, RotateCcw, Play } from 'lucide-react';\nimport { videoApi } from '@/lib/api/video-api';\nimport type { VideoSource } from '@/lib/api/video-api';\nimport { useRouter } from 'next/navigation';\n\ninterface VideoPlayerProps {\n  mediaId: number;\n  mediaType: 'movie' | 'tv';\n  title?: string;\n  season?: number;\n  episode?: number;\n  onClose?: () => void;\n}\n\nexport default function VideoPlayer({\n  mediaId,\n  mediaType,\n  title,\n  season,\n  episode,\n  onClose\n}: VideoPlayerProps) {\n  const [movie, setMovie] = useState<any>(null);\n  const [tvShow, setTvShow] = useState<any>(null);\n  const [embedUrl, setEmbedUrl] = useState<string>('');\n  const [sources, setSources] = useState<VideoSource[]>([]);\n  const [currentSourceIndex, setCurrentSourceIndex] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showSourceSelector, setShowSourceSelector] = useState(false);\n  \n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const router = useRouter();\n\n  // Load video data\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        if (mediaType === 'movie') {\n          const { movie: m, embedUrl: url, sources: srcs } =\n            await videoApi.getMovieWithEmbed(mediaId);\n          if (cancelled) return;\n          setMovie(m);\n          setSources(srcs);\n          setEmbedUrl(url);\n        } else {\n          const { tvShow: tv, embedUrl: url, sources: srcs } =\n            await videoApi.getTVShowWithEmbed(mediaId, season, episode);\n          if (cancelled) return;\n          setTvShow(tv);\n          setSources(srcs);\n          setEmbedUrl(url);\n        }\n        setCurrentSourceIndex(0);\n      } catch (e) {\n        if (!cancelled) setError('Failed to load video. Please try again.');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    })();\n    return () => { cancelled = true; };\n  }, [mediaId, mediaType, season, episode]);\n\n  // Update embed URL when source changes\n  useEffect(() => {\n    const s = sources[currentSourceIndex];\n    if (s) {\n      setEmbedUrl(s.url);\n      setError(null);\n    }\n  }, [currentSourceIndex, sources]);\n\n  const handleIframeError = () => {\n    if (currentSourceIndex < sources.length - 1) {\n      setCurrentSourceIndex(i => i + 1);\n    } else {\n      setError('All video sources failed to load.');\n    }\n  };\n\n  const switchSource = (i: number) => {\n    if (i >= 0 && i < sources.length) {\n      setCurrentSourceIndex(i);\n      setShowSourceSelector(false);\n    }\n  };\n\n  const handleClose = () => {\n    if (onClose) {\n      onClose();\n    } else {\n      router.back();\n    }\n  };\n\n  const mediaTitle = title || movie?.title || tvShow?.name || 'Unknown';\n  const currentSource = sources[currentSourceIndex];\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black flex items-center justify-center\">\n      {/* Top Right Controls - Settings and Close */}\n      <div className=\"absolute top-4 right-4 z-20 flex items-center gap-3\">\n        {/* Settings Button */}\n        {sources.length > 1 && (\n          <button\n            onClick={() => setShowSourceSelector(!showSourceSelector)}\n            className=\"p-2 rounded-full bg-black/50 hover:bg-black/70 text-white transition-colors\"\n            aria-label=\"Video settings\"\n          >\n            <Settings className=\"w-6 h-6\" />\n          </button>\n        )}\n\n        {/* Close Button */}\n        <button\n          onClick={handleClose}\n          className=\"p-2 rounded-full bg-black/50 hover:bg-black/70 text-white transition-colors\"\n          aria-label=\"Close player\"\n        >\n          <X className=\"w-6 h-6\" />\n        </button>\n      </div>\n\n      {/* Title and Info */}\n      <div className=\"absolute top-4 left-4 z-20 max-w-lg\">\n        <h1 className=\"text-white text-2xl font-bold mb-1\">{mediaTitle}</h1>\n        {mediaType === 'tv' && season && episode && (\n          <p className=\"text-gray-400 text-sm mb-2\">\n            Season {season} • Episode {episode}\n          </p>\n        )}\n        {currentSource && (\n          <div className=\"text-gray-400 text-sm\">\n            <p>Source: {currentSource.servers}</p>\n            {sources.length > 1 && (\n              <p>Source {currentSourceIndex + 1} of {sources.length}</p>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Source Selector Dropdown */}\n      {showSourceSelector && sources.length > 1 && (\n        <div className=\"absolute top-16 right-4 z-20 bg-black/90 backdrop-blur-sm rounded-lg p-4 min-w-48\">\n          <h3 className=\"text-white text-sm font-semibold mb-3\">Video Sources</h3>\n          <div className=\"space-y-2\">\n            {sources.map((s, i) => (\n              <button\n                key={`${s.servers}-${i}`}\n                onClick={() => switchSource(i)}\n                className={`w-full text-left px-3 py-2 rounded text-sm transition-colors ${\n                  i === currentSourceIndex\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n                }`}\n              >\n                <div className=\"font-medium\">{s.servers}</div>\n                <div className=\"text-xs opacity-75\">{s.quality}</div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading && (\n        <div className=\"flex flex-col items-center gap-4 text-white\">\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-white\" />\n          <p>Loading video...</p>\n        </div>\n      )}\n\n      {/* Error State */}\n      {error && !loading && (\n        <div className=\"flex flex-col items-center gap-4 text-center max-w-md text-white\">\n          <div className=\"text-red-500 text-6xl\">⚠️</div>\n          <h3 className=\"text-xl font-bold\">Video Unavailable</h3>\n          <p className=\"text-gray-400\">{error}</p>\n          <div className=\"flex gap-3\">\n            {currentSourceIndex < sources.length - 1 && (\n              <button\n                onClick={() => switchSource(currentSourceIndex + 1)}\n                className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-full\"\n              >\n                <Play className=\"w-4 h-4\" />\n                Try Next Source\n              </button>\n            )}\n            <button\n              onClick={() => location.reload()}\n              className=\"flex items-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-full\"\n            >\n              <RotateCcw className=\"w-4 h-4\" />\n              Reload\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Video Player - Full Screen iframe */}\n      {embedUrl && !loading && !error && (\n        <iframe\n          ref={iframeRef}\n          src={embedUrl}\n          title={`Watch ${mediaTitle}`}\n          className=\"w-full h-full border-0\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n          allowFullScreen\n          onError={handleIframeError}\n        />\n      )}\n\n      {/* Config Warning */}\n      {!videoApi.hasConfiguredApis() && !loading && (\n        <div className=\"absolute bottom-4 left-4 right-4 bg-yellow-900/80 text-yellow-100 p-4 rounded-lg max-w-md mx-auto\">\n          <p className=\"text-sm\">\n            <strong>Video APIs not configured:</strong> add your embed base URLs in\n            <code className=\"ml-1\">.env.local</code>.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AANA;;;;;;AAiBe,SAAS,YAAY,EAClC,OAAO,EACP,SAAS,EACT,KAAK,EACL,MAAM,EACN,OAAO,EACP,OAAO,EACU;IACjB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAO;IACxC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAO;IAC1C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB,EAAE;IACxD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7D,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAqB;IAC5C,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,kBAAkB;IAClB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,YAAY;QAChB,CAAC;YACC,WAAW;YACX,SAAS;YACT,IAAI;gBACF,IAAI,cAAc,SAAS;oBACzB,MAAM,EAAE,OAAO,CAAC,EAAE,UAAU,GAAG,EAAE,SAAS,IAAI,EAAE,GAC9C,MAAM,0HAAA,CAAA,WAAQ,CAAC,iBAAiB,CAAC;oBACnC,IAAI,WAAW;oBACf,SAAS;oBACT,WAAW;oBACX,YAAY;gBACd,OAAO;oBACL,MAAM,EAAE,QAAQ,EAAE,EAAE,UAAU,GAAG,EAAE,SAAS,IAAI,EAAE,GAChD,MAAM,0HAAA,CAAA,WAAQ,CAAC,kBAAkB,CAAC,SAAS,QAAQ;oBACrD,IAAI,WAAW;oBACf,UAAU;oBACV,WAAW;oBACX,YAAY;gBACd;gBACA,sBAAsB;YACxB,EAAE,OAAO,GAAG;gBACV,IAAI,CAAC,WAAW,SAAS;YAC3B,SAAU;gBACR,IAAI,CAAC,WAAW,WAAW;YAC7B;QACF,CAAC;QACD,OAAO;YAAQ,YAAY;QAAM;IACnC,GAAG;QAAC;QAAS;QAAW;QAAQ;KAAQ;IAExC,uCAAuC;IACvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,IAAI,OAAO,CAAC,mBAAmB;QACrC,IAAI,GAAG;YACL,YAAY,EAAE,GAAG;YACjB,SAAS;QACX;IACF,GAAG;QAAC;QAAoB;KAAQ;IAEhC,MAAM,oBAAoB;QACxB,IAAI,qBAAqB,QAAQ,MAAM,GAAG,GAAG;YAC3C,sBAAsB,CAAA,IAAK,IAAI;QACjC,OAAO;YACL,SAAS;QACX;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,IAAI,KAAK,KAAK,IAAI,QAAQ,MAAM,EAAE;YAChC,sBAAsB;YACtB,sBAAsB;QACxB;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,SAAS;YACX;QACF,OAAO;YACL,OAAO,IAAI;QACb;IACF;IAEA,MAAM,aAAa,SAAS,OAAO,SAAS,QAAQ,QAAQ;IAC5D,MAAM,gBAAgB,OAAO,CAAC,mBAAmB;IAEjD,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;oBAEZ,QAAQ,MAAM,GAAG,mBAChB,8OAAC;wBACC,SAAS,IAAM,sBAAsB,CAAC;wBACtC,WAAU;wBACV,cAAW;kCAEX,cAAA,8OAAC,0MAAA,CAAA,WAAQ;4BAAC,WAAU;;;;;;;;;;;kCAKxB,8OAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,8OAAC,4LAAA,CAAA,IAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAsC;;;;;;oBACnD,cAAc,QAAQ,UAAU,yBAC/B,8OAAC;wBAAE,WAAU;;4BAA6B;4BAChC;4BAAO;4BAAY;;;;;;;oBAG9B,+BACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;oCAAE;oCAAS,cAAc,OAAO;;;;;;;4BAChC,QAAQ,MAAM,GAAG,mBAChB,8OAAC;;oCAAE;oCAAQ,qBAAqB;oCAAE;oCAAK,QAAQ,MAAM;;;;;;;;;;;;;;;;;;;YAO5D,sBAAsB,QAAQ,MAAM,GAAG,mBACtC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,8OAAC;wBAAI,WAAU;kCACZ,QAAQ,GAAG,CAAC,CAAC,GAAG,kBACf,8OAAC;gCAEC,SAAS,IAAM,aAAa;gCAC5B,WAAW,CAAC,6DAA6D,EACvE,MAAM,qBACF,2BACA,+CACJ;;kDAEF,8OAAC;wCAAI,WAAU;kDAAe,EAAE,OAAO;;;;;;kDACvC,8OAAC;wCAAI,WAAU;kDAAsB,EAAE,OAAO;;;;;;;+BATzC,GAAG,EAAE,OAAO,CAAC,CAAC,EAAE,GAAG;;;;;;;;;;;;;;;;YAiBjC,yBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;kCAAE;;;;;;;;;;;;YAKN,SAAS,CAAC,yBACT,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAwB;;;;;;kCACvC,8OAAC;wBAAG,WAAU;kCAAoB;;;;;;kCAClC,8OAAC;wBAAE,WAAU;kCAAiB;;;;;;kCAC9B,8OAAC;wBAAI,WAAU;;4BACZ,qBAAqB,QAAQ,MAAM,GAAG,mBACrC,8OAAC;gCACC,SAAS,IAAM,aAAa,qBAAqB;gCACjD,WAAU;;kDAEV,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAIhC,8OAAC;gCACC,SAAS,IAAM,SAAS,MAAM;gCAC9B,WAAU;;kDAEV,8OAAC,gNAAA,CAAA,YAAS;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;YAQxC,YAAY,CAAC,WAAW,CAAC,uBACxB,8OAAC;gBACC,KAAK;gBACL,KAAK;gBACL,OAAO,CAAC,MAAM,EAAE,YAAY;gBAC5B,WAAU;gBACV,OAAM;gBACN,eAAe;gBACf,SAAS;;;;;;YAKZ,CAAC,0HAAA,CAAA,WAAQ,CAAC,iBAAiB,MAAM,CAAC,yBACjC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;;sCACX,8OAAC;sCAAO;;;;;;wBAAmC;sCAC3C,8OAAC;4BAAK,WAAU;sCAAO;;;;;;wBAAiB;;;;;;;;;;;;;;;;;;AAMpD","debugId":null}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///home/flex/bradflix/components/media/TVDetailsClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport {\n  Play,\n  Plus,\n  Heart,\n  Star,\n  Calendar,\n  Tv,\n  ArrowLeft,\n  Volume2,\n  VolumeX,\n  X,\n} from \"lucide-react\";\nimport { MediaDetails, Genre } from \"@/lib/api/types\";\nimport { watchlistStorage, likedStorage } from \"@/lib/storage/watchlist\";\nimport VideoPlayer from \"@/components/player/VideoPlayer\";\n\ninterface TVDetailsClientProps {\n  tv: MediaDetails;\n  genres: Genre[];\n}\n\nexport default function TvShowDetailsClient({ tv, genres }: TVDetailsClientProps) {\n  const [showTrailer, setShowTrailer] = useState(false);\n  const [showPlayer, setShowPlayer] = useState(false);\n  const [trailerMuted, setTrailerMuted] = useState(true);\n  const [isLiked, setIsLiked] = useState(false);\n  const [isInWatchlist, setIsInWatchlist] = useState(false);\n\n  // Helper to build TMDB image URLs safely\n  const buildTmdbImage = (path: string | null | undefined, size: string = \"w500\"): string => {\n    if (!path) return \"/placeholder-movie.jpg\";\n    return `https://image.tmdb.org/t/p/${size}${path}`;\n  };\n\n  // Sync liked & watchlist state\n  useEffect(() => {\n    setIsInWatchlist(watchlistStorage.isInWatchlist(tv.id, \"tv\"));\n    setIsLiked(likedStorage.isLiked(tv.id, \"tv\"));\n  }, [tv.id]);\n\n  // Handle watchlist toggle\n  const toggleWatchlist = () => {\n    const item = {\n      id: tv.id,\n      name: tv.name,\n      poster_path: tv.poster_path,\n      media_type: \"tv\" as const,\n      vote_average: tv.vote_average || 0,\n      first_air_date: tv.first_air_date,\n    };\n\n    if (isInWatchlist) {\n      watchlistStorage.removeFromWatchlist(tv.id, \"tv\");\n      setIsInWatchlist(false);\n    } else {\n      watchlistStorage.addToWatchlist(item);\n      setIsInWatchlist(true);\n    }\n\n    window.dispatchEvent(new CustomEvent(\"watchlist-updated\"));\n  };\n\n  // Handle like toggle\n  const toggleLike = () => {\n    const item = {\n      id: tv.id,\n      name: tv.name,\n      poster_path: tv.poster_path,\n      media_type: \"tv\" as const,\n      vote_average: tv.vote_average || 0,\n      first_air_date: tv.first_air_date,\n    };\n\n    if (isLiked) {\n      likedStorage.removeFromLiked(tv.id, \"tv\");\n      setIsLiked(false);\n    } else {\n      likedStorage.addToLiked(item);\n      setIsLiked(true);\n    }\n\n    window.dispatchEvent(new CustomEvent(\"liked-updated\"));\n  };\n\n  // Genres\n  const tvGenres =\n    genres?.filter(\n      (genre) =>\n        tv.genre_ids?.includes(genre.id) ||\n        tv.genres?.some((g) => g.id === genre.id)\n    ) || tv.genres || [];\n\n  // Trailer\n  const trailer =\n    tv.videos?.results?.find(\n      (video) => video.type === \"Trailer\" && video.site === \"YouTube\"\n    ) || tv.videos?.results?.[0];\n\n  // Cast\n  const cast = tv.credits?.cast?.slice(0, 12) || [];\n\n  // Creator\n  const creator =\n    tv.created_by?.[0] || tv.credits?.crew?.find((p) => p.job === \"Creator\");\n\n  return (\n    <div className=\"relative min-h-screen text-white\">\n      {/* Backdrop */}\n      <div className=\"absolute inset-0\">\n        <Image\n          src={buildTmdbImage(tv.backdrop_path, \"w1280\")}\n          alt={tv.name}\n          fill\n          className=\"object-cover\"\n          priority\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black via-black/80 to-black/40\" />\n        <div className=\"absolute inset-0 bg-gradient-to-r from-black via-black/60 to-transparent\" />\n      </div>\n\n      {/* Back Button */}\n      <div className=\"relative z-10 p-4\">\n        <Link\n          href=\"/\"\n          className=\"inline-flex items-center gap-2 bg-black/50 backdrop-blur-sm px-4 py-2 rounded-full hover:bg-black/70 transition-colors\"\n        >\n          <ArrowLeft className=\"w-5 h-5\" />\n          <span>Back to Home</span>\n        </Link>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"relative z-10 px-4 sm:px-6 lg:px-8 pb-20\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12\">\n            {/* Poster */}\n            <div className=\"lg:col-span-1\">\n              <div className=\"relative aspect-[2/3] rounded-2xl overflow-hidden shadow-2xl max-w-md mx-auto lg:mx-0\">\n                <Image\n                  src={buildTmdbImage(tv.poster_path, \"w780\")}\n                  alt={tv.name}\n                  fill\n                  className=\"object-cover\"\n                />\n              </div>\n            </div>\n\n            {/* Info */}\n            <div className=\"lg:col-span-2\">\n              {/* Title */}\n              <div className=\"mb-6\">\n                <h1 className=\"text-4xl lg:text-6xl font-black mb-4 leading-tight\">\n                  {tv.name}\n                </h1>\n\n                {tv.tagline && (\n                  <p className=\"text-xl text-gray-300 italic mb-4\">\n                    {tv.tagline}\n                  </p>\n                )}\n\n                {/* Meta */}\n                <div className=\"flex flex-wrap items-center gap-4 mb-6\">\n                  {tv.vote_average !== undefined && (\n                    <div className=\"flex items-center gap-1 bg-yellow-500 text-black px-3 py-1 rounded-full font-bold\">\n                      <Star className=\"w-4 h-4 fill-current\" />\n                      <span>{tv.vote_average.toFixed(1)}</span>\n                    </div>\n                  )}\n\n                  {tv.first_air_date && (\n                    <div className=\"flex items-center gap-1 bg-gray-700/70 px-3 py-1 rounded-full\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span>{new Date(tv.first_air_date).getFullYear()}</span>\n                    </div>\n                  )}\n\n                  {tv.number_of_seasons && (\n                    <div className=\"flex items-center gap-1 bg-gray-700/70 px-3 py-1 rounded-full\">\n                      <Tv className=\"w-4 h-4\" />\n                      <span>\n                        {tv.number_of_seasons} Season\n                        {tv.number_of_seasons !== 1 ? \"s\" : \"\"}\n                      </span>\n                    </div>\n                  )}\n\n                  {tv.status && (\n                    <div className=\"flex items-center gap-1 bg-gray-700/70 px-3 py-1 rounded-full\">\n                      <span>{tv.status}</span>\n                    </div>\n                  )}\n\n                  {tv.spoken_languages?.[0]?.english_name && (\n                    <div className=\"flex items-center gap-1 bg-gray-700/70 px-3 py-1 rounded-full\">\n                      <span>{tv.spoken_languages[0].english_name}</span>\n                    </div>\n                  )}\n                </div>\n\n                {/* Genres */}\n                {tvGenres.length > 0 && (\n                  <div className=\"flex flex-wrap gap-2 mb-6\">\n                    {tvGenres.slice(0, 4).map((genre) => (\n                      <span\n                        key={genre.id}\n                        className=\"bg-blue-600/80 text-blue-100 px-3 py-1 rounded-full text-sm font-medium\"\n                      >\n                        {genre.name}\n                      </span>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex flex-wrap gap-4 mb-8\">\n                <button\n                  onClick={() => setShowPlayer(true)}\n                  className=\"flex items-center gap-3 bg-red-600 hover:bg-red-700 px-8 py-4 rounded-full font-bold text-lg transition-colors shadow-lg\"\n                >\n                  <Play className=\"w-6 h-6 fill-current\" />\n                  Watch Now\n                </button>\n\n                {trailer && (\n                  <button\n                    onClick={() => setShowTrailer(true)}\n                    className=\"flex items-center gap-3 bg-gray-700/80 hover:bg-gray-700 px-6 py-4 rounded-full font-semibold transition-colors\"\n                  >\n                    <Play className=\"w-5 h-5\" />\n                    Play Trailer\n                  </button>\n                )}\n\n                <button\n                  onClick={toggleWatchlist}\n                  className={`flex items-center gap-3 px-6 py-4 rounded-full font-semibold transition-colors ${\n                    isInWatchlist\n                      ? \"bg-green-600 hover:bg-green-700\"\n                      : \"bg-gray-700/80 hover:bg-gray-700\"\n                  }`}\n                >\n                  <Plus className=\"w-5 h-5\" />\n                  {isInWatchlist ? \"In Watchlist\" : \"Watchlist\"}\n                </button>\n\n                <button\n                  onClick={toggleLike}\n                  className={`p-4 rounded-full transition-colors ${\n                    isLiked\n                      ? \"bg-red-600 hover:bg-red-700\"\n                      : \"bg-gray-700/80 hover:bg-gray-700\"\n                  }`}\n                >\n                  <Heart className={`w-5 h-5 ${isLiked ? \"fill-current\" : \"\"}`} />\n                </button>\n              </div>\n\n              {/* Overview */}\n              {tv.overview && (\n                <div className=\"mb-8\">\n                  <h2 className=\"text-2xl font-bold mb-4\">Overview</h2>\n                  <p className=\"text-lg text-gray-300 leading-relaxed\">\n                    {tv.overview}\n                  </p>\n                </div>\n              )}\n\n              {/* Extra Info */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8\">\n                {creator && (\n                  <div>\n                    <h3 className=\"font-semibold text-gray-400 mb-2\">Creator</h3>\n                    <p className=\"text-white\">{creator.name}</p>\n                  </div>\n                )}\n\n                {tv.networks?.[0] && (\n                  <div>\n                    <h3 className=\"font-semibold text-gray-400 mb-2\">Network</h3>\n                    <p className=\"text-white\">{tv.networks[0].name}</p>\n                  </div>\n                )}\n\n                {tv.number_of_episodes && (\n                  <div>\n                    <h3 className=\"font-semibold text-gray-400 mb-2\">Episodes</h3>\n                    <p className=\"text-white\">{tv.number_of_episodes}</p>\n                  </div>\n                )}\n\n                {tv.episode_run_time?.[0] && (\n                  <div>\n                    <h3 className=\"font-semibold text-gray-400 mb-2\">\n                      Episode Runtime\n                    </h3>\n                    <p className=\"text-white\">{tv.episode_run_time[0]} min</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Cast */}\n          {cast.length > 0 && (\n            <div className=\"mt-12\">\n              <h2 className=\"text-3xl font-bold mb-8\">Cast</h2>\n              <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6\">\n                {cast.map((person) => (\n                  <div key={person.id} className=\"text-center\">\n                    <div className=\"relative aspect-[3/4] rounded-lg overflow-hidden mb-3 bg-gray-800\">\n                      <Image\n                        src={buildTmdbImage(person.profile_path, \"w500\")}\n                        alt={person.name}\n                        fill\n                        className=\"object-cover\"\n                      />\n                    </div>\n                    <h3 className=\"font-semibold text-sm mb-1 line-clamp-2\">\n                      {person.name}\n                    </h3>\n                    <p className=\"text-gray-400 text-xs line-clamp-1\">\n                      {person.character}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Similar */}\n          {tv.similar?.results?.length > 0 && (\n            <div className=\"mt-12\">\n              <h2 className=\"text-3xl font-bold mb-8\">Similar TV Shows</h2>\n              <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6\">\n                {tv.similar.results.slice(0, 12).map((similarShow) => (\n                  <Link key={similarShow.id} href={`/tv/${similarShow.id}`} className=\"group\">\n                    <div className=\"relative aspect-[2/3] rounded-lg overflow-hidden mb-3 bg-gray-800 group-hover:scale-105 transition-transform duration-200\">\n                      <Image\n                        src={buildTmdbImage(similarShow.poster_path, \"w500\")}\n                        alt={similarShow.name}\n                        fill\n                        className=\"object-cover\"\n                      />\n                    </div>\n                    <h3 className=\"font-semibold text-sm line-clamp-2\">\n                      {similarShow.name}\n                    </h3>\n                  </Link>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Player Modal */}\n      {showPlayer && (\n        <VideoPlayer\n          mediaId={tv.id}\n          mediaType=\"tv\"\n          title={tv.name}\n          onClose={() => setShowPlayer(false)}\n        />\n      )}\n\n      {/* Trailer Modal */}\n      {showTrailer && trailer && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4\">\n          <div className=\"relative w-full max-w-6xl aspect-video\">\n            <button\n              onClick={() => setShowTrailer(false)}\n              className=\"absolute -top-12 right-0 z-10 bg-white text-black p-2 rounded-full hover:bg-gray-200 transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n\n            <div className=\"absolute top-4 left-4 z-10 flex gap-2\">\n              <button\n                onClick={() => setTrailerMuted(!trailerMuted)}\n                className=\"bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors\"\n              >\n                {trailerMuted ? <VolumeX className=\"w-5 h-5\" /> : <Volume2 className=\"w-5 h-5\" />}\n              </button>\n            </div>\n\n            <iframe\n              src={`https://www.youtube.com/embed/${trailer.key}?autoplay=1&mute=${\n                trailerMuted ? 1 : 0\n              }&rel=0`}\n              title={`${tv.name} Trailer`}\n              className=\"w-full h-full rounded-lg\"\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n              allowFullScreen\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}