/* app/globals.css - Modern Atto4 theme (fixed transparency + safe fallbacks) */

/* -------------------------
   Self-hosted font (woff2 fallback)
   Place Inter.woff2 in /public/fonts/ if used
   ------------------------- */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 300 700;
  font-display: swap;
  src: local('Inter'), local('Inter-Regular'),
       url('/fonts/Inter.woff2') format('woff2');
}

/* Tailwind directives must be first before custom utilities that rely on them */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Theme variables
   ========================= */
:root{
  --bg-base: #050505;
  --bg-surface: #0a0a0a;

  --glass-surface: rgba(255,255,255,0.03);
  --glass-border: rgba(255,255,255,0.06);
  --glass-highlight: rgba(255,255,255,0.1);
  --glass-shine: rgba(255,255,255,0.05);

  --text-primary: #ffffff;
  --text-secondary: rgba(255,255,255,0.7);
  --text-tertiary: rgba(255,255,255,0.4);

  --elevation-low: 0 4px 20px -4px rgba(0,0,0,0.4);
  --elevation-mid: 0 12px 40px -8px rgba(0,0,0,0.5);
  --elevation-high: 0 24px 60px -12px rgba(0,0,0,0.6);

  --ease-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);

  --max-content-width: 1400px;
}

/* =========================
   Base reset & layout
   ========================= */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html, body, #__next {
  height: 100%;
  width: 100%;
}

html, body {
  max-width: 100vw;
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--bg-base);
  color: var(--text-primary);
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
}

/* Scrollbar refinements */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.12);
  border-radius: 8px;
}
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.22); }

/* Firefox */
* { scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.12) transparent; }

/* Accessibility focus */
:focus-visible {
  outline: 2px solid rgba(255,255,255,0.36);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* =========================
   Header / Floating capsule
   ========================= */

/* Wrapper centers capsule; keep wrapper transparent (no pointer-blocking except capsule) */
.modern-header-wrapper {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  display: flex;
  justify-content: center;
  padding: 1.5rem 1rem;
  transition: padding 0.4s var(--ease-smooth), transform 0.35s var(--ease-smooth);
  pointer-events: none; /* allow clicks through empty areas */
  background: transparent;
}

/* When scrolled, reduce padding only */
.modern-header-wrapper.scrolled {
  padding-top: 1rem;
}

/* The interactive capsule (this receives pointer events) */
.glass-capsule {
  pointer-events: auto;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: rgba(10,10,10,0.6); /* intentionally semi-opaque glass */
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  border: 1px solid var(--glass-border);
  border-radius: 9999px;
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.2),
    var(--elevation-mid),
    inset 0 1px 0 rgba(255,255,255,0.04);
  transition: background 0.4s var(--ease-elastic), box-shadow 0.4s var(--ease-elastic), transform 0.25s var(--ease-smooth);
  max-width: calc(var(--max-content-width) - 48px);
  width: 100%;
}

/* Stronger capsule when scrolled */
.modern-header-wrapper.scrolled .glass-capsule {
  background: rgba(5,5,5,0.85);
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.4),
    var(--elevation-high),
    inset 0 1px 0 rgba(255,255,255,0.06);
}

/* Logo circle */
.logo-circle {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  border: 1px solid var(--glass-highlight);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  transition: transform 0.28s var(--ease-smooth), box-shadow 0.28s var(--ease-smooth);
  box-shadow: inset 0 2px 4px rgba(255,255,255,0.06);
}
.logo-circle:hover { transform: scale(1.05) rotate(3deg); border-color: rgba(255,255,255,0.22); }

/* Logo text wrapper (hidden on small) */
.logo-text-wrapper { display:flex; flex-direction:column; margin-left:0.75rem; margin-right:1.5rem; }
@media (max-width:768px) { .logo-text-wrapper { display:none; } }

.brand-title {
  font-family: 'Chillax', 'Inter', system-ui, sans-serif;
  font-weight: 600;
  font-size: 1.1rem;
  line-height: 1;
  background: linear-gradient(to right, #fff, #ccc);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.brand-subtitle { font-size:0.6rem; color:var(--text-tertiary); letter-spacing:0.1em; text-transform:uppercase; margin-top:2px; }

/* =========================
   Navigation pills
   ========================= */
.nav-island {
  display:flex; align-items:center; gap:0.5rem;
  background: rgba(255,255,255,0.03);
  border-radius: 999px;
  padding: 0.25rem;
  border: 1px solid rgba(255,255,255,0.03);
}
@media (max-width:1024px) { .nav-island { display:none; } }

.nav-pill {
  display:flex; align-items:center; gap:0.5rem; padding:0.6rem 1.2rem;
  color:var(--text-secondary); border-radius:999px;
  transition: background 0.25s var(--ease-smooth), color 0.25s var(--ease-smooth), transform 0.2s var(--ease-smooth);
  font-size:0.9rem; font-weight:500;
}
.nav-pill:hover { color: var(--text-primary); background: rgba(255,255,255,0.04); transform: translateY(-1px); }
.nav-pill.active { color: #000; background: #fff; box-shadow: 0 6px 18px rgba(0,0,0,0.2); font-weight:600; }

/* small icon */
.nav-icon-sm { width:16px; height:16px; opacity:0.85; }

/* =========================
   Action orbs (buttons)
   ========================= */
.action-group { display:flex; align-items:center; gap:0.5rem; margin-left:0.5rem; }
.action-orb {
  width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center;
  background: var(--glass-surface); border:1px solid var(--glass-border); color:var(--text-primary);
  transition: transform 0.22s var(--ease-elastic), box-shadow 0.22s var(--ease-elastic), background 0.22s ease;
  cursor:pointer;
}
.action-orb:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(0,0,0,0.45); border-color: rgba(255,255,255,0.12); }
.action-orb.primary { background: #fff; color:#000; border-color:#fff; }
.action-orb.primary:hover { box-shadow: 0 0 20px rgba(255,255,255,0.18); }

/* =========================
   Search overlay & capsule
   ========================= */
.search-curtain {
  position: fixed; inset: 0; z-index: 90;
  background: rgba(0,0,0,0.6); backdrop-filter: blur(20px);
  opacity: 0; pointer-events: none; transition: opacity 0.28s var(--ease-smooth);
}
.search-curtain.open { opacity:1; pointer-events:auto; }

.search-capsule-wrapper {
  position: fixed; left:50%; top:6rem; transform: translateX(-50%) translateY(-20px);
  width:90%; max-width:600px; z-index:95; opacity:0; transition: transform 0.38s var(--ease-elastic), opacity 0.38s var(--ease-elastic);
}
.search-curtain.open ~ .search-capsule-wrapper,
.search-capsule-wrapper[data-open="true"] { opacity:1; transform: translateX(-50%) translateY(0); }

/* =========================
   Mobile sheet / bottom menu
   ========================= */
.mobile-sheet {
  position: fixed; bottom:1rem; left:1rem; right:1rem; z-index:200;
  background: rgba(15,15,15,0.92); backdrop-filter: blur(20px) saturate(140%);
  border: 1px solid var(--glass-border); border-radius:24px; padding:1rem;
  transform: translateY(120%); transition: transform 0.5s var(--ease-elastic); box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
}
.mobile-sheet.open { transform: translateY(0); }
.mobile-grid { display:grid; grid-template-columns: repeat(4,1fr); gap:0.75rem; }
.mobile-item {
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:0.5rem;
  padding:1rem 0.5rem; border-radius:16px; background: rgba(255,255,255,0.02); color:var(--text-secondary);
  transition: background 0.18s var(--ease-smooth), transform 0.18s var(--ease-smooth);
}
.mobile-item.active { background: rgba(255,255,255,0.06); color:var(--text-primary); transform: translateY(-4px); }
.mobile-icon { width:24px; height:24px; }
.mobile-label { font-size:0.7rem; font-weight:500; }

/* =========================
   Utility helpers
   ========================= */
.line-clamp-1 { overflow:hidden; display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:1; }
.line-clamp-2 { overflow:hidden; display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2; }
.line-clamp-3 { overflow:hidden; display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:3; }

.scrollbar-hide { -ms-overflow-style:none; scrollbar-width:none; }
.scrollbar-hide::-webkit-scrollbar { display:none; }

/* selection */
::selection { background: rgba(255,255,255,0.12); color: #fff; }

/* Safe-area support for mobile notch */
.mobile-dropdown-rectangular { padding-top: env(safe-area-inset-top, 12px); padding-left: env(safe-area-inset-left, 0); padding-right: env(safe-area-inset-right, 0); padding-bottom: env(safe-area-inset-bottom, 0); }

/* GPU hints */
.logo-circle, .glass-capsule, .action-orb, .mobile-item { will-change: transform; transform: translateZ(0); }
